env:
  TEST: "123"
  TEST2: "456"

on:
  push:
  pull_request:
   types: [opened, synchronize]

permissions:
  contents: read
  pull-requests: write

jobs:
  init_job:
    outputs:
      output1: ${{ steps.step1.outputs.test }}
      output2: ${{ steps.step2.outputs.test2 }}
      output3: ${{ steps.step3.outputs.test3 }}
    runs-on: ubuntu-20.04
    steps:
      - id: step1
        run: echo "test=hello" >> $GITHUB_OUTPUT
      - id: step2
        run: echo "test2=world" >> $GITHUB_OUTPUT  
        
      - name: Extract task id
        id: step3
        env:
          PULL_REQUEST_BODY: ${{ github.event.pull_request.body }}
          TASK_IDS: "zero"
        run: |
          TASK_IDS=($(echo ${PULL_REQUEST_BODY} | grep -Eo "\[EMAM3MT5-[0-9]+" | cut -c 2-))
          echo "test3=${{TASK_IDS}}" >> $GITHUB_OUTPUT
          echo "TASK_IDS = ${{ TASK_IDS }}"

  print_title_of_pr:
    runs-on: ubuntu-20.04
    needs: init_job
    steps:
    - name : Print Outputs
      run: echo "Outputs first = ${{needs.init_job.outputs.output1}} second = ${{needs.init_job.outputs.output2}}  third = ${{needs.init_job.outputs.output3}} "    
